<div class="row bg-white p-1 mt-2 rounded-3 shadow mb-4 bg-white">
    <div class="col">
        <h2 class="card-header-title">Cập nhật tài khoản</h2>
        <p>Tài khoản: {{student.fullname}}</p>

        <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home"
                    aria-selected="true">Quản lý tài khoản</button>
                <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile"
                    aria-selected="false">Đổi mật khẩu</button>
                <button class="nav-link" id="nav-history-tab" data-bs-toggle="tab"
                    data-bs-target="#nav-history" type="button" role="tab" aria-controls="nav-history"
                    aria-selected="false">Lịch sử thi</button>
            </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">

            <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                aria-labelledby="nav-home-tab">
                <form action="" method="post" name="formU">
                    <!-- fullname -->
                    <div class="form-group pb-4">
                        <label for="fullname">
                            <i class="fas fa-signature prefix" style="color: crimson;"></i>
                            Full Name:
                        </label>
                        <input class="form-control fs-5" id="fullname" name="fullname" placeholder="Enter full name" type="text"
                            ng-model="student.fullname" required minlength="5">
                        <div ng-hide="formU.fullname.$valid || formU.fullname.$untouched || formU.$submitted">
                            <small class="form-text text-danger" ng-show="formU.fullname.$error.required">
                                Vui lòng nhập họ và tên
                            </small>
                            <small class="form-text text-danger" ng-show="formU.fullname.$error.minlength">
                                Họ và tên không được dưới 5 ký tự
                            </small>
                        </div>
                    </div>
                    
                    <!-- email -->
                    <div class="form-group pb-4">
                        <label for="email">
                            <i class="fas fa-envelope prefix" style="color: crimson;"></i>
                            Email:
                        </label>
                        <input class="form-control fs-5" id="email" name="email" placeholder="Enter email" type="email"
                            ng-model="student.email" required>
                        <div ng-hide="formU.email.$valid || formU.email.$untouched || formU.$submitted">
                            <small class="form-text text-danger" ng-show="formU.email.$error.required">
                                Vui lòng nhập email
                            </small>
                            <small class="form-text text-danger" ng-show="formU.email.$error.email">
                                Email không đúng định dạng
                            </small>
                        </div>
                    </div>
                    
                    <!-- gender -->
                    <div class="form-group pb-4">
                        <label for="gender">
                            <i class="fas fa-transgender prefix" style="color: crimson;"></i>
                            Gender:
                        </label> <br>
                        <div class="form-check form-check-inline">
                            <input ng-model="student.gender" type="radio" class="form-check-input" id="gender" name="gender" value="true" checked>
                            <label class="form-check-label" for="gender">Nam</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input ng-model="student.gender" type="radio" class="form-check-input" id="gender2" name="gender" value="false">
                            <label class="form-check-label" for="gender2">Nữ</label>
                        </div>
                    </div>
                    
                    <!-- dob -->
                    <div class="form-group pb-4">
                        <i class="fas fa-calendar" style="color: crimson;"></i>
                        <label for="dob">Date of birth (yyyy-MM-dd): </label>
                        <input class="form-control fs-5" id="dob" name="dob" placeholder="Enter date of birth" type="text"
                            ng-model="student.birthday" required pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}">
                        <div ng-hide="formU.dob.$valid || formU.dob.$untouched || formU.$submitted">
                            <small class="form-text text-danger" ng-show="formU.dob.$error.required">
                                Vui lòng nhập ngày tháng năm sinh
                            </small>
                            <small class="form-text text-danger" ng-show="formU.dob.$error.pattern">
                                Ngày tháng năm sinh không đúng định dạng
                            </small>
                        </div>
                    </div>
                    
                    <div class="text-center m-4">
                        <a ng-click="updateProfile(student.id)" ng-disabled="formU.$invalid" class="btn btn-success text-uppercase w-50" type="submit">Submit</a>
                    </div>

                </form>
            </div>

            <div class="tab-pane fade" id="nav-profile" role="tabpanel"
                aria-labelledby="nav-profile-tab">
                <form action="" method="post" name="formP">
                    <!-- old pass -->
                    <div class="form-group pb-4">
                        <label for="oldpassword">
                            <i class="fas fa-lock prefix" style="color: crimson;"></i>
                            Old password:
                        </label>
                        <input class="form-control fs-5" id="oldpassword" name="oldpassword" placeholder="Enter old password" type="password"
                            ng-model="oldpassword" required minlength="6">
                        <div ng-hide="formP.oldpassword.$valid || formP.oldpassword.$untouched || formP.$submitted">
                            <small class="form-text text-danger" ng-show="formP.oldpassword.$error.required">
                                Vui lòng nhập mật khẩu
                            </small>
                            <small class="form-text text-danger" ng-show="formP.oldpassword.$error.minlength">
                                Mật khẩu phải nhiều hơn 6 ký tự
                            </small>
                        </div>
                    </div>
                    
                    <!-- new pass -->
                    <div class="form-group pb-4">
                        <label for="password">
                            <i class="fas fa-lock prefix" style="color: crimson;"></i>
                            New password:
                        </label>
                        <input class="form-control fs-5" id="password" name="password" placeholder="Enter new password" type="password"
                            ng-model="studentR.password" required minlength="6">
                        <div ng-hide="formP.password.$valid || formP.password.$untouched || formP.$submitted">
                            <small class="form-text text-danger" ng-show="formP.password.$error.required">
                                Vui lòng nhập mật khẩu
                            </small>
                            <small class="form-text text-danger" ng-show="formP.password.$error.minlength">
                                Mật khẩu phải nhiều hơn 6 ký tự
                            </small>
                        </div>
                    </div>
                    
                    <!-- renewpass -->
                    <div class="form-group pb-4">
                        <label for="confirm_newpassword">
                            <i class="fas fa-lock prefix" style="color: crimson;"></i>
                            Confirm new password:
                        </label>
                        <input class="form-control fs-5" id="confirm_newpassword" name="confirm_newpassword" placeholder="Enter confirm new password"
                            type="password" ng-model="confirm_newpassword" required minlength="6" re-pass>
                        <div ng-hide="formP.confirm_newpassword.$valid || formP.confirm_newpassword.$untouched || formP.$submitted">
                            <small class="form-text text-danger" ng-show="formP.confirm_newpassword.$error.required">
                                Vui lòng nhập mật khẩu
                            </small>
                            <small class="form-text text-danger"
                                ng-show="formP.confirm_newpassword.$invalid && !formP.confirm_newpassword.$error.required">
                                Mật khẩu nhập lại không khớp
                            </small>
                        </div>
                    </div>
                    <div class="text-center m-4">
                        <a class="btn btn-success text-uppercase w-50" ng-disabled="formP.$invalid" ng-click='changePass(student.id)' type="submit">Submit</a>
                    </div>
                </form>
            </div>

            <div class="tab-pane fade" id="nav-history" role="tabpanel"
            aria-labelledby="nav-history-tab">
                <table class="table text-center">
                    <thead>
                        <tr>
                            <th scope="col">Ngày thi</th>
                            <th scope="col">Tên môn học</th>
                            <th scope="col">Điểm</th>
                            <th scope="col">Trạng thái</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="h in histories">
                            <th scope="row">{{h.date}}</th>
                            <td>{{h.name}}</td>
                            <td>{{h.marks}}</td>
                            <td class="text-danger">{{(h.marks > 5) ? 'Passed' : 'Not pass'}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>